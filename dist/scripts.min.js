let pokemonRepository=function(){let t=[],e=0;function o(t){return t.charAt(0).toUpperCase()+t.slice(1)}function n(e){"object"==typeof e&&"name"in e&&"detailsURL"in e?t.push(e):console.error("Pokemon is not correct")}async function i(){const t=await fetch(`https://pokeapi.co/api/v2/pokemon/?offset=${e}&limit=50`);let o=(await t.json()).results.map((function(t){return fetch(t.url).then((function(t){return t.json()})).then((function(e){let o={name:t.name,detailsURL:t.url,imageUrl:e.sprites.other.dream_world.front_default,type:e.types[0].type.name};e.types.length>1&&"normal"===o.type&&(o.type=e.types[1].type.name),n(o)}))}));return await Promise.all(o)}async function a(t){let e=t.detailsURL;try{const o=await fetch(e),n=await o.json();t.imgURL=n.sprites.other.dream_world.front_default,t.height=n.height/10,t.weight=n.weight/10,t.types=n.types,t.abilities=n.abilities}catch(t){console.error(t)}}function l(t){a(t).then((function(){var e;e=t,$(".image-background").attr("class","image-background").addClass(e.type),$("#pokemonModalTitle").text(o(e.name)),$("#pokemonModalImage").attr("src",e.imgURL).addClass("modal-image img-fluid"),$("#pokemonModalHeight").text(`Height: ${e.height} m`).addClass("pt-3"),$("#pokemonModalWeight").text(`Weight: ${e.weight} kg`),$("#pokemonModalTypes").text(`Types: ${e.types.map((t=>o(t.type.name))).join(", ")}`),$("#pokemonModalAbilities").text(`Abilities: ${e.abilities.map((t=>o(t.ability.name))).join(", ")}`)}))}function s(t){let e=$("<div>").addClass("pokemon-div col-9 col-md-4 col-lg-3 border m-1 rounded-lg "+t.type),n=$("<button>").addClass("pokemon-button btn d-flex justify-content-between align-items-center").attr("data-toggle","modal").attr("data-target","#pokemonModal"),i=$("<img>").attr("src",t.imageUrl).attr("alt",`Image of ${t.name}`).addClass("pokemon-image img-fluid");n.append(i);let a=$("<span>").addClass("text-white").text(o(t.name));n.append(a),e.append(n),$(".row").append(e).addClass("justify-content-center"),setTimeout((()=>e.addClass("visible")),50),n.click((function(){l(t)}))}!function(){let e=$("#search-bar");e.on("input",(function(){let o=e.val().toLowerCase(),n=t.filter((t=>t.name.toLowerCase().startsWith(o))),i=$(".row");if(i.empty(),0===n.length){let t="Can't find the Pokemon you are looking for";i.text(`\n\n\n\n\n\n${t}`)}else n.forEach((t=>{s(t)}))}))}();let r=document.querySelector("#search-icon"),c=document.querySelector("#search-bar-container");r.addEventListener("click",(function(){c.classList.toggle("d-none")})),$(window).on("scroll",(function(){$(window).innerHeight()+$(window).scrollTop()>=$(document).height()&&(e+=50,i().then((function(){pokemonRepository.getAll().slice(-50).forEach((function(t){pokemonRepository.addListItem(t)}))})))}));let d=$("#scrollToTopButton");return $(window).scroll((function(){$(window).scrollTop()>20?d.show():d.hide()})),d.click((function(){$("html, body").animate({scrollTop:0},"slow")})),{add:n,getAll:function(){return t},addListItem:s,loadList:i,loadDetails:a,showDetails:l}}();pokemonRepository.loadList().then((function(){pokemonRepository.getAll().forEach((function(t){pokemonRepository.addListItem(t)}))}));